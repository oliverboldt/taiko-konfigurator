<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta charset="UTF-8" />
		<title>mytaikodrum.de - Taiko gestalten</title>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" > 
		<link rel="stylesheet" href="css/common.css">
		<link rel="stylesheet" href="css/menu.css">
		<link rel="stylesheet" href="css/taiko.css">
		<script src="common.js"></script>
		<script src="taiko-data-json.js"></script>
		<style type="text/css">	

			#section-wood {	display: none; }
			#section-handles { display: none; }
			#section-skin { display: none; }
			#section-offer { display: none; }

			#offer-content
			{
				padding-left: 35px;
				padding-right: 55px;
			}

			form
			{
				padding: 10;
			}

			#formpart
			{
				border: 1px dashed black;
				padding: 5px;
			}

			td 
			{ 
				vertical-align: top; 
				font-size: 12; 
			}
			
			.formcol1 
			{	
				width: 8em;	
				padding-top: 5;
			}

			input {	width: 20em; }

			textarea { width: 40em; }

			.menuactive-off
			{
				display: inline-block;
				font-size: 20px;
				border: 2px solid black;
				padding: 5px 10px 5px 10px;
				margin-bottom: 5px;
				background-color: lightblue;
				font-weight: 500;
				cursor: default;
			}

		</style>

	</head>

	<body>
		<div id=wrapper>
			<div id=menu>
				<img id="logo" src="image/logo.jpg"/>
				<div class="link menuitem-mytaikodrum right" 
					onmouseover_off="buttonHighlightStart(this);" 
					onmouseout_off="buttonHighlightStop(this);">
					<a href="start.html">my<strong>taiko</strong>drum.de</a>
				</div>
				<div class=cleardiv></div>
			</div>

			<div id=section-type class=section>
				<h1>Trommeltyp & Größe</h1>
				<div class="choice">
					<p>Ich möchte eine 
					<select id=drum-type onchange="onclick_drumtype(this);">
						<option value="-1" selected>Bitte auswählen...</option>
						<option value="HIRA">Hira-daiko</option>
						<option value="MIYA">Miya-daiko</option>
					</select>
					in der Größe
					<select id=drum-size onchange="onclick_drumsize(this);">
						<option value="-1" selected>Bitte auswählen...</option>
						<option value="14">42cm Felldurchmesser (1,4shaku)</option>
						<option value="15">45cm Felldurchmesser (1,5shaku)</option>
						<option value="16">48cm Felldurchmesser (1,6shaku)</option>
						<option id=shaku17 value="17">51cm Felldurchmesser (1,7shaku)</option>
					</select>
					</p>
					<img id="drum-draft" />
					<p id=drum-price></p>
					<div class="button right forward" 
						onmouseover="buttonHighlightStart(this);" 
						onmouseout="buttonHighlightStop(this);" 
						onclick="onclick_sectionwood(this);"> 
						Holzart & Farbe auswählen >> 
					</div>
					<div class=cleardiv></div>

				</div>				
				<img class=left src="image/miya-redbrown.jpg">
				<h1>Welche Trommel passt zu mir? Miya-Daiko oder Hira-Daiko?</h1>

				<p>Wir bieten dir Miya-daikos und Hira-daikos in verschiedenen Größen. Unsere Taikos werden in 
					Form & Größe präzise so hergestellt wie in Japan und in der Maßeinheit Shaku angegeben. Ein Shaku 
					entspricht ziemlich genau 30cm. Somit entspricht 1,4shaku einen bespielbaren Felldurchmesser von 42cm 
					(42er Miya). 1,6shaku sind entsprechend 48cm (bespielbarer) Felldurchmesser (48er Miya).</p>

				<p>Eine <strong>48er Miya-daiko (1,6shaku)</strong> ist eine sehr universelle Trommel. Du kannst sie mit 
					sehr dicken Bachi spielen, was für die seitliche Schlagtechnik (jap. "Yoko-uchi" oder “Naname-uchi”) 
					sehr interessant ist. Bedingt durch die Größe und einem Gewicht von ca. 20kg ist diese Trommel natürlich 
				aufwendiger im Transport. Die Höhe der Miya-daiko beträgt 60cm.</p>

				<p>Hier hat eine <strong>42er Miya-daiko (1,4shaku)</strong> klare Vorteile und steht optisch und 
					klanglich ihrer etwas größeren Schwester in nichts nach. Sie wiegt unter 14kg und passt wohl 
					in jeden PKW-Kofferraum und fährt auch gerne mal auf die Rücksitzbank mit. Ebenfalls macht sie 
					eine gute Figur auf einem Schrägständer und kann noch mit mittleren Bachi kraftvoll gespielt 
				werden. Die Höhe beträgt 52,5 cm. </p>

				<img class=right src="image/hira-250px.jpg"><p>Wenn deine Taiko noch mobiler sein soll, Du gerne mit Bus und Bahn unterwegs bist und deine Taiko 
					zu jedem Training oder Ausflug mit soll, passt eine <strong>Hira-daiko (jap. "flache Trommel")</strong> 
					zu Dir. Wir bauen sie in 4 Größen als 42er (bespielbarer Felldurchmesser 42 cm)  bis 51cm (1,4 bis 1,7 shaku). 
					Die Höhe des Trommelkörpers ist ungefähr nur halb so hoch wie bei einer Miya-daiko. So eine Trommel 
					ist viel leichter und kann ohne Auto transportiert werden. Der Klang einer Hira-daiko ist ebenfalls 
					flacher und der Ton länger als bei einer Miya. Für die Taiko-stile Yoko-uchi (jap. "seitlich schlagen") 
					und Naname-uchi (jap. "schräg schlagen") benötigst du aber eine oben beschriebene Miya-daiko.</p>

				<h1>So entsteht der Körper deiner Taiko:</h1>
				<p>Die Dauben werden zunächst ausgesägt, angeschrägt und dann verleimt. Die Taicut.cnc-Fräsmaschine 
				bringt den Rohling dann auf Maß und in Form. Nach dem Schleifen kann es an die 
				Oberfächenbehandlung gehen.</p>
				<img src="image/galery/20190720_145402-thumbnail.jpg"/>
				<img src="image/galery/20190722_161403-thumbnail.jpg"/>
				<img src="image/galery/20190725_170428-thumbnail.jpg"/>
				<img src="image/galery/20190803_111805-thumbnail.jpg"/>
				<img src="image/galery/taicut.cnc-thumbnail.jpg"/>
				<img src="image/galery/taicut.cnc-fraeser-thumbnail.jpg"/>
				<img src="image/galery/20191113_110129-thumbnail.jpg"/>
				
				<div class="button" 
						onmouseover="buttonHighlightStart(this);" 
						onmouseout="buttonHighlightStop(this);" 
						onclick="onclick_sectionwood(this);"> 
						Welche Farbe möchtest Du ? 
					</div>
			</div>
			<div id=section-wood class=section>
				<h1>Holzart & Farbe</h1>
				<div class="choice">
					<div class="button left backwards" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectiontype(this);"> 
							<< Typ & Größe auswählen
					</div>
					<div class=cleardiv></div>
					<p>Für meine Taiko möchte ich
						<select id=wood-type onchange="onchange_woodtype(this);">
							<option value=WOOD_ASH>...</option>
							<option value=WOOD_MAPLE>...</option>
							<option value=WOOD_ELM>...</option>
						</select>
					</p>
					<div id=wood-color>
						<img id='WOODCOLOR_NATURAL' class="img-option img-rotate" src='image/woodcolor-nature.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<img id='WOODCOLOR_PEAR' class="img-option img-option-selected" src='image/woodcolor-pear.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<img id='WOODCOLOR_NUT' class=img-option src='image/woodcolor-nut.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<img id='WOODCOLOR_REDBROWN' class=img-option src='image/woodcolor-redbrown.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<img id='WOODCOLOR_RED' class=img-option src='image/woodcolor-darkred.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<img id='WOODCOLOR_SPECIAL' class=img-option src='image/woodcolor-special.jpg' 
							onclick="onclick_drumcolor(this)"/>
						<p id=color-option-text class=option-text>...</p>	
					</div>
					<div class="button right forward" style="margin-top:-30px;"
						onmouseover="buttonHighlightStart(this);" 
						onmouseout="buttonHighlightStop(this);" 
						onclick="onclick_sectionhandle(this,false);"> 
						Haltegriffe auswählen >> 
					</div>
					<div class=cleardiv></div>					
	
				</div>

				<figure class=right>
				  <img src="image/20191118_101202.jpg" alt /> 
				  <figcaption>Links: Farbton rot-braun, rechts: Farbton: Birne </figcaption>
				</figure>
				<p>Wir verwenden hochwertige, europäische Esche. Als Holz liefert es die Qualität die wir  
					zum Taikobau benötigen. Es ist relativ hell und lässt sich damit gut auf den
				 	Wunschfarbton beizen. Und dabei bleibt die wunderschöne Eschen-Maserung weiterhin sichtbar. </p>

				<p>Alternativ zu Esche ist auch Ahorn (mit Aufpreis) möglich. Ein sehr helles und 
					hartes Holz mit weniger Maserung.</p>

				<p>Gerne verwende ich Holz auch in seiner Naturfarbe. So hat z.B. Rüster (Ulmenholz) 
					einen schönen braunton, den man dann nicht überbeizen sollte.</p>

				<p>Empfehlen möchten wir Dir Esche!</p>

				<p>Bei der Wahl deiner Farbe solltest Du berücksichtigen, ob die Taiko mit anderen 
					Instrumenten aus Deiner Taikogruppe auf der Bühne stehen soll. In diesem Fall ist 
					es von Vorteil, die Optik passend zu den anderen Taikos zu wählen.</p>
			</div>
			<div id=section-handles class=section>
				<h1>Haltegriffe</h1>
				<div class="choice">
					<div class="button left backwards" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionwood(this,false);"> 
							<< Holzart & Farbe auswählen
					</div>
					<div class=cleardiv></div>
					<p>Ich möchte folgende Griffe:</p>
					<div id=drum-handle>
						<img id=HANDLE_NONE class="img-option img-option-selected" src='image/woodcolor-pear.jpg'
							onclick="onclick_drumhandle(this)"/>
						<img id=HANDLE_BRASS_SMALL class="img-option" src='image/kan-messingrosette-klein.jpg' 
							onclick="onclick_drumhandle(this)"/>
						<img id=HANDLE_BRASS_BIG 
							class=img-option src='image/kan-messingrosette-gross.jpg' 
							onclick="onclick_drumhandle(this)"/>
						<img id=HANDLE_STEEL_SMALL 
							class=img-option src='image/kan-stahlrosette-klein.jpg'
							onclick="onclick_drumhandle(this)"/>
						<img id=HANDLE_STEEL_BIG 
							class="img-option" src='image/kan-stahlrosette-gross.jpg'
							onclick="onclick_drumhandle(this)"/>
						<img id=HANDLE_STEEL_NOBASE 
							class=img-option src='image/kan-ohnegrundplatte.jpg' 
							onclick="onclick_drumhandle(this)"/>
					</div>
					<p id=handle_option_text>Ohne Haltegriffe</p>
					<div class="button right forward" style="margin-top: -20px;"
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionskin(this,false);"> 
							Felle & Nägel auswählen >>
					</div>
					<div class=cleardiv></div>				
					
				</div>
				<p>Haltegriffe sind dekorativ und funktionell. Wenn du eine 20kg schwere Miya-daiko auf einen 
					hohen Ständer heben musst, sind sie fast unverzichtbar. Bei kleineren Trommeln wie den 
					Hira-daikos kann man sie, wenn optisch gewünscht gerne anbringen, das Handling gelingt 
					auch ohne Griffe leicht.</p>

				<figure class="right">
				  <img src="image/kan-20160407_112602-300px.jpg"/>
				  <figcaption>Grundplatte, Rosette und Kloben </figcaption>
				</figure>
				 
				 <p>Unsere Haltegriffe werden von einem Kloben gehalten, der durch die Trommelwand hindurchgeführt  
				 	und von innen verschraubt wird. Die schwarze Grundplatte gibt es in zwei Größen. Darauf 
				 	befindet sich dann entweder eine flache Messingrosette oder eine dickere Stahlrosette. 
				 	Letztere kann sogar ohne die Grundplatte verwendet werden - eine sehr schöne Option 
				 	für kleinere Trommeln.</p>
			</div>


			<div id=section-skin class=section>
				<h1>Felle & Nägel</h1>
				<div class="choice">				
					<div class="button left backwards" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionhandle(this,false);"> 
							<< Haltegriffe auswählen
					</div>
					<div class=cleardiv></div>
					<p>Folgende Nägel stehen zur Auswahl</p>
					<div style="display:inline-block;">
						<img id=NAIL_20MM class="img-nail-option img-option-selected" src="image/nagel-20mm-120px.jpg"
							onclick="onclick_nail(this)"/>
						<img id=NAIL_19MM class="img-nail-option" src="image/nagel-19mm-120px.jpg"
							onclick="onclick_nail(this)"/>
						<img id=NAIL_16MM class="img-nail-option" src="image/nagel-16mm-120px.jpg"
							onclick="onclick_nail(this)"/>
					</div>
					<div style="display:inline-block; width: 300px; margin-left: 30px">
						<img id=NAILROWS_2 class="img-nailrows-option img-option-selected" src="image/nagel-2-reihig-300px.jpg"
							onclick="onclick_nailrow(this)"/>
						<img id=NAILROWS_1 class="img-nailrows-option" src="image/nagel-1-reihig-300px.jpg"
							onclick="onclick_nailrow(this)"/>

					</div>
					<p id=nail_option_text>xxx</p>
					<div class="button right forward"  style="margin-top: -20px;"
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionoffer(this);"> 
							Deine Taiko >>
					</div>
					<div class=cleardiv></div>
				</div>
				<h1>Nägel</h1>
				<p>Als Standard kommen Nägel mit 20mm-Kopf aus deutscher Herstellung zum Einsatz. Zweireihig in 
					Hartholz genagelt erzeugen sie eine hohe Festigkeit.</p>
				<p>Alternativ gibt es Nägel aus Japan. Ihr Kopf ist mit 19mm bzw. 17mm etwas kleiner und stärker gekrümmt - ein "Look"
				wie man ihn in Japan gewohnt ist. Der Nagelstift ist länger und dicker und sorgt für noch besseren 
				Halt - interessant für eine einreihige Nagelung oder größere Trommeln mit sehr dicken Fellen.</p>
				<h1>T-Skins: Rindspergament und eine Prise Magie</h1>
				<p>Für alle Hiras und Miyas benutzen wir 'Rindspergament natur' (ungebleicht) in einer optimalen Stärke
				passend zur Größe der Trommel. Zunächst haben die rohen Felle eine Farbe zwischen Honig und Brauntönen. 
				Später, durch das starke Spannen, werden die Felle sehr hell.</p>
				<p>Bevor wir die Felle das erste Mal aufziehen, werden sie zu 'T-Skins' (bzw. 'Taiko-Skins') weiterverarbeitet. 
				Dieses Verfahren ist über einen Zeitraum von 15 Jahren durch Experiemente entwickelt worden, mit dem Ziel 
				Felle zu bekommen, die besser klingen und ihren Klang längerfristig wahren.</p>
				<p>Jedes Fell wird zweimal aufgezogen: beim ersten Durchgang entsteht bei noch mäßiger Spannung die 
				charakteristische Form der Felle mit geradem Rand und den typischen 'Röhrchen-Ohren'. Nach dem Trocknen wird 
				dann nochmal die Schlagfläche eingeweicht und mit maximaler Kraft gespannt. Insgesamt bedarf es also 4 Spannvorgänge
				für jede Taiko - und ca. 3 Wochen Zeit.</p>
			</div>

			<div id=section-offer class=section>
				<h1>Deine Taiko</h1>
				<form action="mailer.php">
				<input type=hidden name="sys_betreff" value="Anfrage mytaikodrum.de">
				<div class="choice">
					<div class="button" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectiontype(this,true);"> 
							Typ & Größe
					</div>
					<div class="button" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionwood(this,true);"> 
							Holz & Farbe
					</div>
					<div class="button" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionhandle(this,true);"> 
							Griffe
					</div>
					<div class="button" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_sectionskin(this,true);"> 
							Felle & Nägel
					</div>
					<div class="button right" 
							onmouseover="buttonHighlightStart(this);" 
							onmouseout="buttonHighlightStop(this);" 
							onclick="onclick_newdesign(this);"> 
							Neues Design starten
					</div>
					<div class=cleardiv></div>			

					<p>Geschafft! Nun hast Du Deine Wunsch-Taiko erschaffen:</p>
					<div id=offer-content></div>
					<p><strong>Inklusive:</strong></p>
					<div class=smallertext>		
						<ul>				
							<li><strong>Standardgrößen</strong> der Taikos nach dem Japanischen Shaku-System, d.h. authentisches
							Aussehen und kompatibel mit Standardzubehör. </li>
							<li><strong>Form-Faktor</strong> nach japanischen Vorbild: Trommelkörper sind innen stärker gekrümmt als 
							außen für den typischen warmen Klang.</li>
							<li>Original <strong>'Japanische Röhrchen-Ohren'</strong></li> 
							<li>Felle <strong>doppelt gezogen</strong> für formschönen Rand und hohe Spannung</li>
							<li>Made in Germany und deshalb auch <strong>'wartbar in Germany'</strong> - eine langfristige und 
							nachhaltige Investition.
						</ul>
					</div>

				</div>
				<div id=formpart>
					<p>Wie geht es jetzt weiter? Schick uns diesen, Deinen Taiko-Entwurf und  
						wir beraten Dich unverbindlich weiter.</p>
					<table>				
						<tr><td class="formcol1">Name</td><td><input name="Name" type="text"></td></tr>
						<tr><td class="formcol1">Email</td><td><input name="liame" type="email"></td></tr>
						<tr><td class="formcol1">Telefon</td><td><input name="Telefon" type="text"></td></tr>
						<tr><td class="formcol1">Anmerkungen <br>& Fragen</td><td>
								<textarea name="Anmerkungen" rows="10"></textarea></td>
						</tr>
							<td></td>
							<td><button type=submit>Taiko unverbindlich anfragen</button></td>
						</tr>
					</table>
				</div>
				</form>
			</div>

			<div class="footer">
				<a href="impressum.html">Impressum</a> | <a href="ueber.html">über:mytaikodrum.de</a>
			</div>
		</div>

		<script type="text/javascript">

/*
			function setCookie(cname, cvalue/, exdays/) {
			  /var d = new Date();
			  d.setTime(d.getTime() + (exdays*24*60*60*1000));
			  var expires = "expires="+ d.toUTCString();/
			  document.cookie = cname + "=" + cvalue + "; SameSite=lax" /+ expires/ + ";path=/";
			}

			function getCookie(cname) 
			{
				  var name = cname + "=";
				  var decodedCookie = decodeURIComponent(document.cookie);
				  var ca = decodedCookie.split(';');
				  for(var i = 0; i <ca.length; i++) {
				    var c = ca[i];
				    while (c.charAt(0) == ' ') {
				      c = c.substring(1);
				    }
				    if (c.indexOf(name) == 0) {
				      return c.substring(name.length, c.length);
				    }
				  }
				  return "";
				}
				*/

			function getDrumSpec()
			{
				return localStorage.getItem("drumspec");
			}

			function storeDrumSpec()
			{
				localStorage.setItem("drumspec", JSON.stringify(global.drum));
				// document.cookie = "drumspec="+ JSON.stringify(global.drum)+"; SameSite=lax";
			}

			function resetDrumSpec()
			{
				global.drum.id = "";

				// if (global.drum.woodId == "")
					global.drum.woodId = "WOOD_ASH";

				// if (global.drum.colorId == "")
					global.drum.colorId = "WOODCOLOR_PEAR";

				// if (global.drum.handleId == "")
					global.drum.handleId = "HANDLE_NONE";

				// if (global.drum.nailId == "")
					global.drum.nailId = "NAIL_20MM";

				// if (global.drum.nailrowId == "")
					global.drum.nailrowId = "NAILROWS_2";
			}


			function description(obj,lang)
			{
				var text = null;

				if (lang == "en")
					text = obj.description_en;

				return text != null ? text : obj.description;
			}	
						
			function findSection(element)
			{
				if (element == null)
					return element;

				if (element.classList.contains('section'))
					return element;

				return findSection(element.parentElement);
			}

			function onclick_sectiontype(element,editMode)
			{
				storeDrumSpec();
				document.location.assign("?section=type" + (editMode ? "&edit=1" : ""));
			}

			function onclick_sectionwood(element,editMode)
			{
				if (global.drum.id == "")
				{
					var text = document.querySelector("#drum-price");

					text.innerHTML = "Bitte Typ und Größe der Taiko auswählen."
				}
				else
				{
					storeDrumSpec();
					document.location.assign("?section=wood" + (editMode ? "&edit=1" : ""));
				}
			}


			function onclick_sectionhandle(element,editMode)
			{
				storeDrumSpec();
				document.location.assign("?section=handles" + (editMode ? "&edit=1" : ""));
			}

			function onclick_sectionskin(element,editMode)
			{
				storeDrumSpec();
				document.location.assign("?section=skin" + (editMode ? "&edit=1" : ""));
			}

			function onclick_sectionoffer(element)
			{
				storeDrumSpec();
				document.location.assign("?section=offer");
			}

			function onclick_newdesign(element)
			{
				resetDrumSpec();
				onclick_sectiontype(element);
			}

			function onclick_drumtype(element,editMode)
			{
				var drumType = element.value;
				var drumSizeElement = document.querySelector("#drum-size")
				var drumSize = drumSizeElement.value;
				var shaku17 = document.querySelector("#shaku17");

				if (drumType == "MIYA")
				{
					if (drumSize == "17")
					{
						drumSizeElement.value = "-1";
					}

					shaku17.style.display = "none";
				}
				else if (drumType == "HIRA")
				{
					shaku17.style.display = "inline";
				}

				updateDrumIdAndPrice();
			}

			function onclick_drumsize(element)
			{
				updateDrumIdAndPrice();
			}


			function onchange_woodtype(element)
			{		
				global.drum.woodId = element.value;

				if (element.value == "WOOD_ELM")
				{
					onclick_drumcolor(document.querySelector("#WOODCOLOR_NATURAL"));
				}

				storeDrumSpec();
	
				/*
				document.querySelector("#wood-color").style.display 
					= element.value == "WOOD_ELM" /TODO/? 'none' : 'block';
					*/
			}

			function onclick_drumcolor(image)
			{
				global.drum.colorId = image.id;
				storeDrumSpec();

				var allOptions = image.parentElement.querySelectorAll("img");

				for (i=0; i<allOptions.length; i++)
				{
					allOptions[i].classList.remove("img-option-selected");
				}

				image.classList.add("img-option-selected");		
				document.querySelector("#color-option-text").innerHTML
					 = description(TAIKO_DATA_JSON.getWoodcolorDataForId(global.drum.colorId),global.lang);
			}


			function onclick_drumhandle(image)
			{
				global.drum.handleId = image.id;
				storeDrumSpec();

				var handleText = document.querySelector("#handle_option_text");
				var allOptions = image.parentElement.querySelectorAll("img");
				var handleData = TAIKO_DATA_JSON.getHandleDataForId(global.drum.handleId)

				for (i=0; i<allOptions.length; i++)
				{
					allOptions[i].classList.remove("img-option-selected");
				}

				image.classList.add("img-option-selected");
				handleText.innerHTML = description(handleData,global.lang);

				if (parseInt(handleData.price) > 0)
					handleText.innerHTML += ", Aufpreis " + handleData.price + ",- Euro";
			}

			function getNailInfo()
			{
				var drumData = TAIKO_DATA_JSON.getDrumDataForId(global.drum.id);
				var nailData = TAIKO_DATA_JSON.getNailDataForId(global.drum.nailId);
				var rows = global.drum.nailrowId == "NAILROWS_1" ? 1 : 2;
				
				var pricePerNail = parseFloat(nailData.price);
				var drumDiameter = parseFloat(drumData.diameter) * 300.0;
				var nailDiameter = parseFloat(nailData.diameter);
				var distanceOfNails = rows == 1 ? nailDiameter : nailDiameter * 1.5;
				var numberOfNails = Math.round((drumDiameter * 3.14 / distanceOfNails) * rows * 2 /* sides */);
				var totalNailPrice = pricePerNail * numberOfNails;

				var info = { };

				info.price = Math.round(totalNailPrice/5.0)*5.0;
				info.description = description(nailData,global.lang)
										+ (rows == 1 ? ", einreihig" : ", zweireihig");

				info.descriptionWithPrice = info.description;						

				if (totalNailPrice > 0)
					info.descriptionWithPrice += ", Aufpreis " + info.price + ",- Euro"; // (" + numberOfNails + " Nägel)";

				return info;
			}

			function onclick_nail(image)
			{
				global.drum.nailId = image.id;
				storeDrumSpec();

				var allOptions = image.parentElement.querySelectorAll("img");

				for (let option of allOptions)
				{
					if (option == image)
						image.classList.add("img-option-selected");
					else
						option.classList.remove("img-option-selected");
				}

				image.classList.add("img-option-selected");
				document.querySelector("#nail_option_text").innerHTML = getNailInfo().descriptionWithPrice;
			}

			function onclick_nailrow(image)
			{
				global.drum.nailrowId = image.id;
				storeDrumSpec();

				var allOptions = image.parentElement.querySelectorAll("img");

				for (let option of allOptions)
				{
					if (option == image)
						image.classList.add("img-option-selected");
					else
						option.classList.remove("img-option-selected");
				}
				
				document.querySelector("#nail_option_text").innerHTML = getNailInfo().descriptionWithPrice;
			}


			function updateDrumIdAndPrice()
			{
				var drumType = document.querySelector("#drum-type").value;
				var drumSize = document.querySelector("#drum-size").value;
				var drumPrice = document.querySelector("#drum-price");
				var draft = document.querySelector("#drum-draft");

				if (drumType != "-1" && drumSize > 0)
					global.drum.id = drumType + "_DAIKO_" + drumSize;
				else
					global.drum.id = "";

				storeDrumSpec();

				var drumData = TAIKO_DATA_JSON.getDrumDataForId(global.drum.id);

				if (drumData != null)	
				{	
					drumPrice.innerHTML = drumData.name + " für Basispreis von " + drumData.price + ",- Euro";
					draft.src = "image/" + drumData.thumbnail_size;
					draft.style.display = "inline";
				}
				else
				{
					drumPrice.innerHTML = "";	
					draft.style.display = "none";
				}
							
			}

			function switchToEditMode(section)
			{
				var forward = section.querySelector(".forward");
				var backwards = section.querySelector(".backwards");

				if (forward != null)
				{
					forward.innerHTML = "übernehmen";
					forward.onclick = function() { onclick_sectionoffer(forward); }
				}

				if (backwards != null)
				{
					backwards.innerHTML = "verwerfen";
					backwards.onclick = function() { history.back(); }
				}
			}


			function open_sectiontype(edit)
			{				
				var drumtypeSelect = document.querySelector("#drum-type");
				var drumsizeSelect = document.querySelector("#drum-size");

				if (edit == "1")
					switchToEditMode(document.querySelector("#section-type"));

				if (global.drum.id != "")
				{
					var drumSize = global.drum.id.substring(global.drum.id.indexOf("DAIKO_")+6);

					if (global.drum.id.indexOf("MIYA") == 0)
						drumtypeSelect.value = "MIYA";
					else if (global.drum.id.indexOf("HIRA") == 0)
						drumtypeSelect.value = "HIRA";

					drumsizeSelect.value = drumSize;

					onclick_drumtype(drumtypeSelect);	
				}
			}


			function open_sectionwood(edit)
			{
				document.querySelector("#section-type").style.display = "none";
				document.querySelector("#section-wood").style.display = "block";

				if (edit == "1")
					switchToEditMode(document.querySelector("#section-wood"));

				// Update woodtype-select
				//
				var woodTypeSelect = document.querySelector("#wood-type");

				// Add prices to woodtype depending on drumsize
				//
				var options = "";

				for (i=0; i<TAIKO_DATA_JSON.woodtypes.length; i++)
				{
					var woodPrice = TAIKO_DATA_JSON.getPriceForWood(TAIKO_DATA_JSON.woodtypes[i],global.drum.id);
					var priceTag = "";

					if (woodPrice > 0)
					{
						priceTag = "(Aufpreis " + woodPrice + ",- Euro)";
					}

					options += "<option value=" + TAIKO_DATA_JSON.woodtypes[i].id + ">" 
							+ description(TAIKO_DATA_JSON.woodtypes[i],global.lang) 
							+ " " + priceTag
							+ "</option>";			
				}				

				woodTypeSelect.innerHTML = options;
				woodTypeSelect.value = global.drum.woodId;

				// Inject color data from TAIKO_DATA_JSON
				//
				for (i=0; i<TAIKO_DATA_JSON.woodcolors.length; i++)
				{
					var colorElement = document.querySelector("#"+TAIKO_DATA_JSON.woodcolors[i].id);

					if (TAIKO_DATA_JSON.woodcolors[i].id == global.drum.colorId)
					{
						colorElement.classList.add("img-option-selected");
						document.querySelector("#color-option-text").innerHTML 
							= description(TAIKO_DATA_JSON.woodcolors[i],global.lang);
					}
					else
						colorElement.classList.remove("img-option-selected");
				}

			}


			function open_sectionhandles(edit)
			{
				var handleSection = document.querySelector("#section-handles");

				document.querySelector("#section-type").style.display = "none";
				handleSection.style.display = "block";

				if (edit == "1")
					switchToEditMode(handleSection);

				var handleElement = document.querySelector("#" + global.drum.handleId); 

				if (handleElement != null)
				{
					onclick_drumhandle(handleElement);
				}
				else
				{
					// Default is no handle
					//
					document.querySelector("#handle_option_text").innerHTML 
								= description(TAIKO_DATA_JSON.handles[0],global.lang);
				}
			}

			function open_sectionskin(edit)
			{
				document.querySelector("#section-type").style.display = "none";
				document.querySelector("#section-skin").style.display = "block";

				if (edit == "1")
					switchToEditMode(document.querySelector("#section-skin"));

				onclick_nail(document.querySelector("#"+global.drum.nailId));
				onclick_nailrow(document.querySelector("#"+global.drum.nailrowId));
			}

			function open_sectionoffer()
			{
				document.querySelector("#section-type").style.display = "none";
				document.querySelector("#section-offer").style.display = "block";

				var drumData = TAIKO_DATA_JSON.getDrumDataForId(global.drum.id);
				var woodTypeData = TAIKO_DATA_JSON.getWoodtypeDataForId(global.drum.woodId);
				var woodPrice = TAIKO_DATA_JSON.getPriceForWood(woodTypeData,global.drum.id);
				var woodColorData = TAIKO_DATA_JSON.getWoodcolorDataForId(global.drum.colorId);
				var handleData = TAIKO_DATA_JSON.getHandleDataForId(global.drum.handleId);
				var nailData = TAIKO_DATA_JSON.getNailDataForId(global.drum.nailId);

				var offerContent = document.querySelector("#offer-content");
				var handleText = description(handleData, global.lang);
				var woodText = description(woodTypeData, global.lang);
				var colorText = description(woodColorData, global.lang);
				var drumPrice = parseInt(drumData.price);
				var handlePrice = parseInt(handleData.price);
				var nailInfo = getNailInfo();
				var totalPrice = drumPrice + woodPrice + handlePrice + nailInfo.price;

				offerContent.innerHTML = ""
					+ "<img height=200 width=auto style='margin-right:10px' src='image/" 
					+ (TAIKO_DATA_JSON.isMiya(global.drum.id) ? woodColorData.thumbnail_miya : woodColorData.thumbnail_hira) + "'/>";

				if (handleData.id != "HANDLE_NONE")
					offerContent.innerHTML += "<img height=125 width=auto "
						+ " style='padding: 10px; margin-right:10px; background-image:url(image/" + woodColorData.thumbnail + ")'"
						+ " src='image/" + handleData.thumbnail + "'/>"

				offerContent.innerHTML += "<img height=125 width=auto src='image/" 
					+ drumData.thumbnail_size + "'/>";		

				offerContent.innerHTML 
					+= "<p>"+ drumData.name + " / " + drumData.description + "</p>"
					+ "<p style='text-align:right; margin-top:-40px;'>"+ drumPrice + ",- Euro </p>"
					+ "<p>"+ woodTypeData.description + " " + colorText + "</p>"
					+ "<p style='text-align:right; margin-top:-40px;'>"+ woodPrice + ",- Euro </p>"
					+ "<p>"+ handleText + "</p>"
					+ "<p style='text-align:right; margin-top:-40px;'>"+ handlePrice + ",- Euro </p>"
					+ "<p>"+ nailInfo.description + "</p>"
					+ "<p style='text-align:right; margin-top:-40px;'>"+ nailInfo.price + ",- Euro </p>"
					+ "<p><strong>Summe</strong></p>"
					+ "<p style='text-align:right; margin-top:-40px;'><strong>"+ totalPrice + ",- Euro </strong></p>"

					+ "<input type=hidden name='drum' value='" + drumData.name + "'>"
					+ "<input type=hidden name='wood' value='" + woodText + " " + colorText.replace("'", "") + "'>"
					+ "<input type=hidden name='handle' value='" + handleText + "'>"
					+ "<input type=hidden name='nails' value='" + nailInfo.description + "'>"
					;
			}


			// Startup code
			//
			var url = new URL(window.location.href);
			var searchParams = url.searchParams;


			var global = { drum: { id: "", woodId: "WOOD_ASH", colorId: "WOODCOLOR_PEAR", 
									handleId: "HANDLE_NONE", nailId: "NAIL_20MM", nailrowId: "NAILROWS_2" } 
						, lang: "de" };

			var spec = getDrumSpec();

			if (spec != null)
			{
				var data = JSON.parse(spec);

				if (data != null)
					global.drum = data;
			}

	
			// resetDrumSpec();

			if (searchParams.has("lang"))
			{
				global.lang = searchParams.get("lang");
			}

			var section = searchParams.get("section");
			var edit = searchParams.get("edit");

			if (section == "wood")
			{
				open_sectionwood(edit);
			}
			else if (section == "handles")
			{
				open_sectionhandles(edit);
			}
			else if (section == "skin")
			{
				open_sectionskin(edit);
			}
			else if (section == "offer")
			{
				open_sectionoffer();
			}
			else
			{
				open_sectiontype(edit);
			}
	
		</script>
	</body>

</html>